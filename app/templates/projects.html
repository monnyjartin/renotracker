{% extends "_layout.html" %}
{% block content %}
<h2 class="mb-3">Projects</h2>

<div class="card p-3 mb-3">
  <h5 class="mb-2">Create a project</h5>
  <form class="row g-2" method="post" action="/projects/create">
    <div class="col-12 col-md-4">
      <input class="form-control" name="name" placeholder="Project name (e.g., Rother Green)" required>
    </div>
    <div class="col-12 col-md-6">
      <input class="form-control" name="description" placeholder="Description (optional)">
    </div>
    <div class="col-12 col-md-2 d-grid">
      <button class="btn btn-primary" type="submit">Create</button>
    </div>
  </form>
</div>

<div class="card p-3">
  <h5 class="mb-2">All projects</h5>
  {% if projects %}
    <div class="list-group list-group-flush">
      {% for p in projects %}
        <div class="list-group-item bg-transparent">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <div class="fw-semibold">{{ p.name }}</div>
              <div class="small-muted">{% if p.description %}{{ p.description }}{% else %}â€”{% endif %}</div>
            </div>
            <form method="post" action="/projects/{{ p.id }}/set-active">
              <button class="btn btn-sm btn-outline-primary" type="submit">
                {% if user.active_project_id == p.id %}Active{% else %}Set active{% endif %}
              </button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="small-muted">No projects yet.</div>
  {% endif %}
</div>
{% endblock %}
